<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!--[if lt IE 9]>
      <script src="https://cdn.jsdelivr.cn/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
      <script src="https://cdn.jsdelivr.cn/npm/respond.js@1.4.2/dest/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" href="./bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="./css/Projects.css">
    <!-- <script src="/vue/vue.js"></script> -->
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script src="./css/Projects.css"></script>
    <title>Project Showcase</title>
    <link rel="icon" href="./images/uoa-logo.jpg" id="icon">  </link>
    <script src="./js/loginstate.js"></script>
</head>
<body>
    <div id="backtop">
        <a href="#top"><img src="./images/rocket.svg" alt="backtop"></a>
    </div>
    <header>
        <section id="top" class="top-nav">
            <div class="left-menu col-md-8 ">
                <img src="./images/uoa-logo.jpg" alt="logo">
                
                <a href="./Home.html">Home</a>
                <a href="javascript:;">About us</a>
                <a href="./Projects.html"><button class="btn">Project</button></a>
                <a href="./login.html" id="login">Log in</a>
                <a href="./space.html" id="space">My Space</a>   
                          
                
            </div>
            <div class="search-wrap">
                <div>
                    <input type="text" placeholder="Search Projects">
                    <img src="./images/Search.svg" alt="Search">
                </div>
                <a href="javascript:;" id="signout"><button class="btn" onclick="signout()">Sign Out</button></a>
            </div>
        </section>
        <section id="pjsearch">
            <div id="pjsearchtext">
                <h1 class="col-md-10">Search Projects from Portfolio</h1>
                <a type="button" class="btn btn-info col-md-2" href="./PJUpload.html">Upload Project</a>
            </div>
            <div id="pjsearchbar">
                <input type="text" class="form-control" placeholder="Search Projects With Key Words" aria-describedby="basic-addon1" v-model="keywords"> 
                <ul>
                    <li v-for="pj in pjs" >
                        {{ pj.text }}            
                    </li>
                </ul>

            </div>
        </section>
    </header>
    <main class="main">
        <nav id="selectbar">
            <ul>
                <li><a href="javascript:;" @click="getAllpj">ALL</a></li>
                <li><a href="javascript:;">Java</a></li>
                <li><a href="javascript:;">Python</a></li>
                <li><a href="javascript:;">PHP</a></li>
                <li><a href="javascript:;">Go</a></li>
                <li><a href="javascript:;">HTML</a></li>
                <!-- <li><a href="#">Linux</a></li>
                <li><a href="#">sadasd</a></li>
                <li><a href="#">asdasd</a></li>
                <li><a href="#">sadasd</a></li>
                <li><a href="#">sadasd</a></li> -->
            </ul>
        </nav>
        <div class="mainbody">
            <div class=".container">
                <section class="mainleft col-md-10">
                    <a href="#"><h3 id="Java"><img src="./images/Java_logo.svg" alt="Java_logo">&nbsp; Java</h3> </a>
                    <div class="btn-group">
                        <button type="button" class="btn btn-info">Action</button>
                        <button type="button" class="btn btn-info dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                          <span class="caret"></span>
                          <span class="sr-only">Toggle Dropdown</span>
                        </button>
                        <ul class="dropdown-menu">
                          <li><a href="#">Action</a></li>
                          <li><a href="#">Another action</a></li>
                          <li><a href="#">Something else here</a></li>
                          <li role="separator" class="divider"></li>
                          <li><a href="#">Separated link</a></li>
                        </ul>
                      </div>
                    <ul id="javapj">
                        <li><a href="#"><img src="./images/Java_logo.svg" alt=""><p><span class="glyphicon glyphicon-heart">500 </span></p><p>Project Name</p></a></li>
                        <li><a href="#"><img src="./images/Java_logo.svg" alt=""><p><span class="glyphicon glyphicon-heart">500 </span></p><p>Project Name</p></a></li>
                        <li><a href="#"><img src="./images/Java_logo.svg" alt=""><p><span class="glyphicon glyphicon-heart">500 </span></p><p>Project Name</p></a></li>
                        <li><a href="#"><img src="./images/Java_logo.svg" alt=""><p><span class="glyphicon glyphicon-heart">500 </span></p><p>Project Name</p></a></li>
                        <li><a href="#"><img src="./images/Java_logo.svg" alt=""><p><span class="glyphicon glyphicon-heart">500 </span></p><p>Project Name</p></a></li>
                        <li><a href="#"><img src="./images/Java_logo.svg" alt=""><p><span class="glyphicon glyphicon-heart">500 </span></p><p>Project Name</p></a></li>
                        <li><a href="#"><img src="./images/Java_logo.svg" alt=""><p><span class="glyphicon glyphicon-heart">500 </span></p><p>Project Name</p></a></li>
                        <li><a href="#"><img src="./images/Java_logo.svg" alt=""><p><span class="glyphicon glyphicon-heart">500 </span></p><p>Project Name</p></a></li>
                        <li><a href="#"><img src="./images/Java_logo.svg" alt=""><p><span class="glyphicon glyphicon-heart">500 </span></p><p>Project Name</p></a></li>
                        <li><a href="#"><img src="./images/Java_logo.svg" alt=""><p><span class="glyphicon glyphicon-heart">500 </span></p><p>Project Name</p></a></li>
                    </ul>
                </section>
                <section class="mainright col-md-2 hidden-sm hidden-xs">
                    <h3>Ranking</h3>
                    <ul id="javarank">
                        <li><a href="#">1</a></li>
                        <li><a href="#">2</a></li>
                        <li><a href="#">3</a></li>
                        <li><a href="#">4</a></li>
                        <li><a href="#">5</a></li>
                        <li><a href="#">6</a></li>
                        <li><a href="#">7</a></li>
                        <li><a href="#">8</a></li>
                        <li><a href="#">9</a></li>
                        <li><a href="#">10</a></li>
                    </ul>
                </section> 
            </div>  
        </div>
    </main>
    <script>
        let pj = Vue.createApp({
                data(){
                    return{
                        
                    }
                },
                methods:{
                    getLike(pjId){
                        var like = 0;
                        axios.get('project/getProjectLikeByID?pid='+pjId)
                        .then(function (response) {
                            like = response.data;
                        })
                        .catch(function (error) {
                            console.log(error);
                        });
                        return(like);
                    },
                    getpjBylike(){
                        axios.get('project/GetProjectByLike/1')
                        .then(function (response) {
                            document.getElementById("javarank").innerHTML="";
                            var data = response.data;
                            for(let i=0; i<response.data.length; i++){
                                var pjId = data[i].id;
                                var pname = data[i].pname;
                                var like = data[i].likeamount;
                                if(like == null){
                                    like = 0;
                                }
                                var li = document.createElement("li");
                                li.innerHTML = "<a href='./PJDetial.html?id=" + pjId +"'><span class='number'>"+(i+1)+"</span><p> &nbsp "+pname+"</p></a>";
                                document.getElementById("javarank").appendChild(li);
                            }
                        })
                        .catch(function (error) {
                            console.log(error);
                        });
                    },
                    getAllpj(){
                        axios.get('project/getAllprojects')
                        .then(function (response) {
                            document.getElementById("javapj").innerHTML="";
                            var data = response.data;
                            for(let i=0; i<response.data.length; i++){
                                var pjId = data[i].id;
                                var pname = data[i].pname;
                                var cover = data[i].coverImage;
                                if(cover == null){
                                    cover = "./images/uoa-logo.jpg";
                                }
                                var like = pj.getLike(pjId);
                                var li = document.createElement("li");
                                li.innerHTML = "<a href='./PJDetial.html?id=" + pjId +"'><img src="+cover+"><p><span>&#10084; "+like+" </span></p><p>"+pname+"</p></a>";
                                document.getElementById("javapj").appendChild(li);
                            }
                        })
                        .catch(function (error) {
                            console.log(error);
                        });
                    }
                    
                },
                mounted(){
                    this.getAllpj();
                    this.getpjBylike();
                    
                }
            }).mount('.main')
    </script>
    <footer>
        <section id="bottomBody" class=".container">
            <nav class="col-md-6">
                <ul>
                    <h4>Team19</h4>
                    <li><a href="#">About</a></li>
                    <li><a href="#">Contact</a></li>
                    <li><a href="#">Help</a></li>
                </ul>
            </nav>
            <nav class="col-md-6">
                <ul>
                    <h4>Profile</h4>
                    <li><a href="./PJDetial.html">My projects</a></li>
                    <li><a href="./space.html">My homepage</a></li>
                    <li><a href="./setting.html">Settings</a></li>
                </ul>
            </nav>
        </section>
        <hr>
        <section id="legalBar"><p>&copy; 2022 Team19.&nbspAll rights reserved. </p></section>    
    </footer>
</body>
</html>